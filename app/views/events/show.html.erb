<% if notice %>
	<div class="alert alert-dismissible alert-success col-lg-12">
		<button type="button" class="close" data-dismiss="alert">×</button>
		<%= notice %>
	</div>
<% end %>

<div class="well bs-component col-lg-6">
  <p>
    <strong>RepsWithUs ID:</strong>
    <%= @event.rwu_id %>
  </p>

  <p>
    <strong>Title:</strong>
    <%= @event.title %>
  </p>

  <p>
    <strong>Description:</strong>
    <%= @event.description %>
  </p>

  <p>
    <strong>Venue:</strong>
    <%= @event.venue_name %>
  </p>

  <p>
    <strong>Public:</strong>
    <%= @event.public %>
  </p>
  
	<h4 class="col-lg-12">Candidates</h4>

  <%= form_for(@event, html: { class: "form-horizontal" }) do |f| %>
    <input type="hidden" name="candidate_id_to_remove" id="candidate_id_to_remove" value="">
    <div class="col-lg-12 panel panel-default">
      <div class="col-lg-12 panel-body">
        <table class="table table-striped table-hover">
          <tbody>
            <% @event.candidates.each do |candidate| %>
              <tr>
                <td><%= candidate.person_name %></td>
                <td style="float: right; padding-right: 22px">
                  <%= f.submit 'x', onclick: "$('#candidate_id_to_remove').val(#{candidate.id})", 
                                    class: "btn btn-danger" %>
              </tr>
            <% end %>
          </tbody>
        </table>
        <% remaining_candidates = Candidate.all - @event.candidates %>
        <% if remaining_candidates.size > 0 %>
    	    <fieldset>
            <div class="form-group">
              <div class="col-lg-10">
              <%= f.select :candidates, options_from_collection_for_select(remaining_candidates, 
            																															 :id, 
            																															 :person_name, 
            																															 nil),
            																															 {}, { class: "form-control" } %>
              </div>
              <div class="col-lg-1">
                <%= f.submit '+', class: "btn btn-primary" %>
              </div>
            </div>
          </fieldset>
        <% end %>
      </div>
    </div>
  <% end %>  
  
  <ul class="pager">
  	<li class="next"><%= link_to 'Edit →', edit_event_path(@event) %></li>
  	<li class="previous"><%= link_to '← Back', events_path %></li>
  </ul>
</div>